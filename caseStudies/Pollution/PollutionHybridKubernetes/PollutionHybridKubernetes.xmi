<?xml version="1.0" encoding="UTF-8"?>
<pasys:ComputationalSystem
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:pasys="www.unican.es/ISTR/P3forI4/pasys"
    xsi:schemaLocation="www.unican.es/ISTR/P3forI4/pasys ../../../RAI4DeploymentTool/metamodels/RAI4_Metamodel.ecore#//pasys"
    name="SantanderPollution"
    date="20/11/2019"
    authors="P. López y R. Dintén">
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="NimbusNode"
      id="NimbusNode"
      ip="172.31.16.48"
      os="Ubuntu"
      concurrencyLevel="8"
      userName="gestor"/>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="CassandraNode"
      id="CassandraNode"
      ip="172.31.16.47"
      os="Ubuntu"
      userName="gestor"/>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="SupervisorNode"
      id="SupervisorNode"
      ip="172.31.16.52"
      os="Ubuntu"
      userName="gestor"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeCluster"
      name="NimbusCluster"
      id="NimbusCluster"
      nodes="//@ownedElements.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeCluster"
      name="SupervisorCluster"
      id="SupervisorCluster"
      nodes="//@ownedElements.2"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeCluster"
      name="CassandraCluster"
      id="CassandraCluster"
      nodes="//@ownedElements.1"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeCluster"
      name="StormCluster"
      id="StormCluster"
      nodes="//@ownedElements.0 //@ownedElements.2"/>
  <ownedElements
      xsi:type="pasys:ZookeeperService"
      name="PollutionZkpr"
      id="PollutionZkpr"
      host="//@ownedElements.13">
    <deploymentConfig
        xsi:type="pasys:OrchestratorDeploymentConf"
        image="zookeeper"
        imageTag="3.7"
        imagePullPolicy="IfNoPresent"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:KafkaService"
      name="PollutionKafka"
      id="PollutionKafka"
      host="//@ownedElements.13"
      commId="1"
      zookeeperConnect="//@ownedElements.7"
      listeners="PLAINTEXT://172.31.16.47:9092"
      advertisedListeners="PLAINTEXT://172.31.16.47:9092"
      autoCreateTopicEnable="true">
    <deploymentConfig
        xsi:type="pasys:OrchestratorDeploymentConf"
        image="gcr.io/google_containers/kubernetes-kafka"
        imageTag="1.0-10.2.1"
        imagePullPolicy="IfNotPresent"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:StormService"
      name="PollutionStorm"
      id="PollutionStorm"
      host="//@ownedElements.6"
      workflows="//@ownedElements.11"
      zookeeperConnect="//@ownedElements.7">
    <deploymentConfig
        xsi:type="pasys:NodeDeploymentConf"
        artifactLocator="/home/gestor/apache/services/storm/bin"
        artifactName="storm"
        configFolderPath="/home/gestor/apache/services/storm/config"
        scriptFolderPath="/home/gestor/apache/services/storm/scripts"
        dataFolderPath="/home/gestor/apache/services/storm/data"
        logFolderPath="/home/gestor/apache/services/storm/logs"/>
    <nimbus
        name="PolllutionStormNimbus"
        id="PolllutionStormNimbus"
        host="//@ownedElements.3">
      <deploymentConfig
          xsi:type="pasys:NodeDeploymentConf"
          artifactLocator="/home/gestor/apache/services/storm/bin"
          artifactName="storm"
          configFolderPath="/home/gestor/apache/services/storm/config"
          scriptFolderPath="/home/gestor/apache/services/storm/scripts"
          dataFolderPath="/home/gestor/apache/services/storm/data"
          logFolderPath="/home/gestor/apache/services/storm/logs"/>
    </nimbus>
    <supervisor
        name="PollutionStormSupervisor"
        id="PollutionStormSupervisor"
        host="//@ownedElements.4">
      <deploymentConfig
          xsi:type="pasys:NodeDeploymentConf"
          artifactLocator="/home/gestor/apache/services/storm/bin"
          artifactName="storm"
          configFolderPath="/home/gestor/apache/services/storm/config"
          scriptFolderPath="/home/gestor/apache/services/storm/scripts"
          dataFolderPath="/home/gestor/apache/services/storm/data"
          logFolderPath="/home/gestor/apache/services/storm/logs"/>
      <supervisorSlotPorts>6700</supervisorSlotPorts>
      <supervisorSlotPorts>6701</supervisorSlotPorts>
      <supervisorSlotPorts>6702</supervisorSlotPorts>
      <supervisorSlotPorts>6703</supervisorSlotPorts>
    </supervisor>
    <ui name="PollutionStormUI"
        id="PollutionStormUI"
        host="//@ownedElements.3">
      <deploymentConfig
          xsi:type="pasys:NodeDeploymentConf"
          artifactLocator="/home/gestor/apache/services/storm/bin"
          artifactName="storm"
          configFolderPath="/home/gestor/apache/services/storm/config"
          scriptFolderPath="/home/gestor/apache/services/storm/scripts"
          dataFolderPath="/home/gestor/apache/services/storm/data"
          logFolderPath="/home/gestor/apache/services/storm/logs"/>
    </ui>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:KafkaWorkloadStreamData"
      name="Pollution"
      id="Pollution"
      numPartitions="1"
      numReplication="1"
      holder="1">
    <deploymentConfig
        xsi:type="pasys:OrchestratorDeploymentConf"
        image="kafka"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:Workflow"
      name="PollutionProcess"
      id="PollutionProcess"
      rootTask="//@ownedElements.11/@ownedTasks.0"
      scheduler="//@ownedElements.9">
    <deploymentConfig
        xsi:type="pasys:NodeDeploymentConf"
        artifactLocator="/home/gestor/apache/apps/pollution/workflows/jars"
        artifactName="SantanderPollution.jar"
        configFolderPath="/home/gestor/apache/apps/pollution/workflows/config"
        scriptFolderPath="/home/gestor/apache/apps/pollution/workflows/scripts"
        dataFolderPath="/home/gestor/apache/apps/pollution/workflows/data"
        logFolderPath="/home/gestor/apache/apps/pollution/workflows/logs"/>
    <ownedTasks
        name="MainTask"
        id="MainTask"
        implementingClassName="es.unican.dintenr.santanderPollution.SantanderPollutionTopology"
        triggerStreamData="//@ownedElements.10"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:CassandraService"
      name="PollutionCassandra"
      id="PollutionCassandra"
      host="//@ownedElements.5"
      logging="root"
      passwd="root"
      port="9042"
      seeds="//@ownedElements.5"
      seedProviderClass="SimpleProvider"
      dataFileDir="/home/gestor/apache/services/cassandra/data/data">
    <deploymentConfig
        xsi:type="pasys:NodeDeploymentConf"
        artifactLocator="/home/gestor/apache/services/cassandra/bin"
        artifactName="cassandra"
        configFolderPath="/home/gestor/apache/services/cassandra/config"
        scriptFolderPath="/home/gestor/apache/services/cassandra/scripts"
        dataFolderPath="/home/gestor/apache/services/cassandra/data"
        logFolderPath="/home/gestor/apache/services/cassandra/logs"/>
    <cqlSchemas
        filePath="/home/gestor/apache/apps/pollution/workflows/data"
        fileName="cassandra_schema.sql"/>
    <dataCenters
        name="PollutionCluster"
        id="PollutionCluster">
      <racks
          name="PollutionCluster"
          id="PollutionCluster"
          nodes="//@ownedElements.5"/>
    </dataCenters>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:KubernetesCluster"
      name="KubernetesCluster"
      id="KubernetesCluster"
      kubeConfigPath="C:\\temp\\kubernetes\\kubeConfig"/>
</pasys:ComputationalSystem>
